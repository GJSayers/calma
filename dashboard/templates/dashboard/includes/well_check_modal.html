{% load crispy_forms_tags %}
<div class="container">
  <div class="row">
    <div id="currentMindfulCheckResults" class="col-md-3"></div>
  </div>
</div>
<form method="POST" class="uniForm">
  {% csrf_token %} {{ form }}
  <input type="submit" value="Submit" />
</form>

<script>
  const currentMindfulCheckResults = document.getElementById(
    'currentMindfulCheckResults'
  );
  const mindfulScales = document.querySelectorAll('.mindfulScale');

  let mindResults = {
    Purpose: '0',
    Emotional: '0',
    Financial: '0',
    Physical: '0',
    Social: '0',
    Community: '0',
    Career: '0',
    Overall: '0',
  };
  Object.entries(mindResults).forEach((mindResult) => {
    currentMindfulCheckResults.innerHTML += `
        <div class="
            w-100
            border border-1
            rounded
            d-flex
            align-items-center
            justify-content-center
            "
            style="height: 100px; background-color: #f5f5f5; font-size: 24px;"
        >
            <p class="m-0">${mindResult[0]}: ${mindResult[1]}</p>
        </div>
    `;
  });

  mindfulScales.forEach((mindfulScale) => {
    mindfulScale.addEventListener('change', () => {
      for (let [key, value] of Object.entries(mindResults)) {
        if (mindfulScale.id == key) {
          mindResults[key] = mindfulScale.value;
          console.log(mindResults);
        }
      }
      currentMindfulCheckResults.innerHTML = '';
      Object.entries(mindResults).forEach((mindResult) => {
        currentMindfulCheckResults.innerHTML += `
            <div class="
                w-100
                border border-1
                rounded
                d-flex
                align-items-center
                justify-content-center
                "
                style="height: 100px; background-color: #f5f5f5; font-size: 24px;"
            >
                <p class="m-0">${mindResult[0]}: ${mindResult[1]}</p>
            </div>
          `;
      });
    });
  });
</script>
